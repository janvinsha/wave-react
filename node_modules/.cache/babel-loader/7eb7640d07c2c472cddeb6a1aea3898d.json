{"ast":null,"code":"!function (e, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? n(exports, require(\"web3modal\")) : \"function\" == typeof define && define.amd ? define([\"exports\", \"web3modal\"], n) : n((e || self).UAuthWeb3Modal = {}, e.web3Modal);\n}(this, function (e, n) {\n  function t() {\n    return t = Object.assign || function (e) {\n      for (var n = 1; n < arguments.length; n++) {\n        var t = arguments[n];\n\n        for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n      }\n\n      return e;\n    }, t.apply(this, arguments);\n  }\n\n  var o,\n      r = \"2.2.0\";\n\n  if (\"undefined\" != typeof window) {\n    var i = window;\n    i.UAUTH_VERSION = i.UAUTH_VERSION || {}, i.UAUTH_VERSION.WEB3MODAL = r;\n  }\n\n  e.connector = function (e, i) {\n    try {\n      var a,\n          c = function (e) {\n        if (null == a.wallet_type_hint) throw new Error(\"no wallet type present\");\n        var r;\n        if ([\"web3\", \"injected\"].includes(a.wallet_type_hint)) r = n.connectors.injected();else {\n          if (\"walletconnect\" !== a.wallet_type_hint) throw new Error(\"Connector not supported\");\n          var c = \"walletconnect\";\n          r = n.connectors.walletconnect(o.providerController.getProviderOption(c, \"package\"), t({\n            network: i.network\n          }, o.providerController.getProviderOption(c, \"options\")));\n        }\n        return r;\n      },\n          l = new e(i),\n          u = function (e, n) {\n        try {\n          var t = Promise.resolve(l.user()).then(function (e) {\n            a = e;\n          });\n        } catch (e) {\n          return n();\n        }\n\n        return t && t.then ? t.then(void 0, n) : t;\n      }(0, function () {\n        if (!l.fallbackLoginOptions.scope.includes(\"wallet\")) throw new Error('Must request the \"wallet\" scope for connector to work.');\n        return i.shouldLoginWithRedirect ? Promise.resolve(l.login({\n          packageName: \"@uauth/web3modal\",\n          packageVersion: r\n        })).then(function () {\n          return Promise.resolve(new Promise(function () {})).then(function () {\n            throw new Error(\"Should never get here.\");\n          });\n        }) : Promise.resolve(l.loginWithPopup({\n          packageName: \"@uauth/web3modal\",\n          packageVersion: r\n        })).then(function () {\n          return Promise.resolve(l.user()).then(function (e) {\n            a = e;\n          });\n        });\n      });\n\n      return Promise.resolve(u && u.then ? u.then(c) : c());\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, e.display = {\n    name: \"Unstoppable\",\n    logo: \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjczMTkgMi4wNjkzNFY5Ljg3MjI5TDAgMTkuMDk0TDIyLjczMTkgMi4wNjkzNFoiIGZpbGw9IiMyRkU5RkYiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE4LjQ2OTYgMS43MTM4N1YxNS4xOTE3QzE4LjQ2OTYgMTkuMTA5NCAxNS4yODkyIDIyLjI4NTMgMTEuMzY1OSAyMi4yODUzQzcuNDQyNjUgMjIuMjg1MyA0LjI2MjIxIDE5LjEwOTQgNC4yNjIyMSAxNS4xOTE3VjkuNTE2ODJMOC41MjQ0MyA3LjE3NTk0VjE1LjE5MTdDOC41MjQ0MyAxNi41NjI5IDkuNjM3NTkgMTcuNjc0NSAxMS4wMTA3IDE3LjY3NDVDMTIuMzgzOSAxNy42NzQ1IDEzLjQ5NyAxNi41NjI5IDEzLjQ5NyAxNS4xOTE3VjQuNDQ0OUwxOC40Njk2IDEuNzEzODdaIiBmaWxsPSIjNEM0N0Y3Ii8+PC9zdmc+\",\n    description: \"Enter your Unstoppable domain name\"\n  }, e.getUAuth = function (e, n) {\n    return new e(n);\n  }, e.registerWeb3Modal = function (e) {\n    o = e;\n  };\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;oCAAaA;IAAAA,KAAU,SAAVA;ICSbC,kBAAsBA,mBACpB,EADF,EACQC,CAAKC,cAALD,CACHE,SADGF,GACgBE,CAFxB;EAEwBA;;EAAAA,wBACnBA,CADmBA,EACnBA,CADmBA,EACnBA;IAAAA;MAAAA,IAAcC,CAAdD;MAAAA,IAAcC,cAAYL,CAAZK,EAAYL;QAAAA,gCAiCzBM,MAHY,UAgChB,wBAhCgB,CAGZA;QA6BKC,IACPC,CADOD;QACP,aAAUE,UAAV,EAAgBC,QAAhB,CAAgBC,kBAAhB,GAIGH,KAAQ,WAAR,CAAoBE,QAApB,GAJH,KAIqCH;UAAAA,wBAChBK,kBADgBL,EACfM,MACjB,IAA8BJ,KAA9B,CAA8B,yBAA9B,CADiBI;UACRN,IAWdO,mBAXcP;UAWEC,+BAVLO,qBAEAH,iBAFA,CAEWI,CAFX,EAEWA,SAFX,CAUK,EAPDC;YAAAA,WAAmBC;UAAnBD,GAAmBC,qBAAsBA,iBAAtBA,CAEhBC,CAFgBD,EAEhBC,SAFgBD,CAAnBD,CAOC;QAJIA;QAAAA;MAAAA,CA5EnBb;MAAAA,IA4EmBa,CAAmBC,WA5EtCd;MAAAA,IA4EsCc,cAAsBE,CAAtBF,EAAsBG,CAAtBH,EAAsB;QAAA;UAAA,IAO/DI,WApDMC,QAoDN,CApDwBC,EAGpBC,IAHoBD,EAoDxB,EAjDIC,IAiDJ,CAjDIA;YAAAA;UAAAC,CAiDJ,CAP+D;QA1C3DA,CA0C2D,CA1C3DA;UAAAC,OACiBrB,GADjBqB;QACiBrB;;QAAAA,OAAnBA,mCAAmBA;MAAnBA,CAyCuCY,CAzCvCZ,CAyCuCY,EAzCvCZ;QAAAA,kCADEI,QACFJ,CADE,QACFA,GAEWsB;QACO,mDAFJC,EAKVL,KALU,CAKLM;UAAAA;UACDP,cACJQ;QAFKD,CALK,CAEI,EAKdC,IALc,CAKD;UAAA,cACbC,QADa,CACGhC,2BADH,EACGA,IADH,CACGA;YAAAA,MAMR0B,UAAc,wBAAdA,CANQ1B;UAMM,CAPT;QASf,CAdgB,IAchB0B,OAAM,CAAIjB,OAAV,CAAgBoB;UAAAE,WAhBJL,oBAgBI;UAEJO,cACVF;QAHc,EAAhB,EAGEA,IAHF,CAGe;UAAA,cACbC,QADa,CACGhC,QADH,EAnBHkC,IAmBG,CAnBH;YAAAvB;UAAAe,CAmBG;QAnBHA,CAgBZ,CAdgB;MAFJA,CAwCyBR,CA5EtCd;;MAoCauB,OAsBCJ,OAAMjB,QAANiB,CAAbjB,2BA0BL,EA1BkBiB,CAtBDI;IAgDjB,CApFIvB,CAoFJ;MAAAsB;IAAAQ;EAAAA,CArFuB9B,EAqFvB+B,YAzDqB;IAAAC,IAAfhB,eAAe;IAAfM,swBAAe;IAXdW;EAWc,CA5BEjC,EAkBtBiC,aAAa;IAAA;EAAA,CAlBSjC,EAkBTgB,sBAGS,UAItBA,CAJsB,EAItB;IAAAL;EAAA,CAzBsBX;AAyBtB","names":["VERSION","i","_w","window","UAUTH_VERSION","WEB3MODAL","user","wallet_type_hint","r","Error","includes","a","connectors","injected","c","o","walletconnect","providerController","getProviderOption","network","e","n","t","uauth","opts","_temp4","Promise","resolve","fallbackLoginOptions","l","shouldLoginWithRedirect","packageName","packageVersion","loginWithPopup","then","_temp3","name","description"],"sources":["../src/version.ts","../src/index.ts"],"sourcesContent":["export const VERSION = \"2.2.0\";\n","import type UAuthSPA from '@uauth/js'\nimport type {UAuthConstructorOptions, UserInfo} from '@uauth/js'\nimport Web3Modal, {\n  connectors,\n  IAbstractConnectorOptions,\n  IProviderDisplay,\n} from 'web3modal'\nimport {VERSION} from './version'\n\nif (typeof window !== 'undefined') {\n  const _w = window as any\n  _w.UAUTH_VERSION = _w.UAUTH_VERSION || {}\n  _w.UAUTH_VERSION.WEB3MODAL = VERSION\n}\n\nexport interface IUAuthOptions\n  extends Partial<IAbstractConnectorOptions>,\n    UAuthConstructorOptions {\n  shouldLoginWithRedirect?: boolean\n}\n\nlet w3m: Web3Modal\nexport const registerWeb3Modal: (web3modal: Web3Modal) => void = web3modal => {\n  w3m = web3modal\n}\n\nexport const display: IProviderDisplay = {\n  name: 'Unstoppable',\n  logo: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjczMTkgMi4wNjkzNFY5Ljg3MjI5TDAgMTkuMDk0TDIyLjczMTkgMi4wNjkzNFoiIGZpbGw9IiMyRkU5RkYiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE4LjQ2OTYgMS43MTM4N1YxNS4xOTE3QzE4LjQ2OTYgMTkuMTA5NCAxNS4yODkyIDIyLjI4NTMgMTEuMzY1OSAyMi4yODUzQzcuNDQyNjUgMjIuMjg1MyA0LjI2MjIxIDE5LjEwOTQgNC4yNjIyMSAxNS4xOTE3VjkuNTE2ODJMOC41MjQ0MyA3LjE3NTk0VjE1LjE5MTdDOC41MjQ0MyAxNi41NjI5IDkuNjM3NTkgMTcuNjc0NSAxMS4wMTA3IDE3LjY3NDVDMTIuMzgzOSAxNy42NzQ1IDEzLjQ5NyAxNi41NjI5IDEzLjQ5NyAxNS4xOTE3VjQuNDQ0OUwxOC40Njk2IDEuNzEzODdaIiBmaWxsPSIjNEM0N0Y3Ii8+PC9zdmc+',\n  description: 'Enter your Unstoppable domain name',\n}\n\nexport const getUAuth = (\n  UAuth: typeof UAuthSPA,\n  opts: IUAuthOptions,\n): UAuthSPA => {\n  return new UAuth(opts)\n}\n\nexport const connector = async (\n  UAuth: typeof UAuthSPA,\n  opts: IUAuthOptions,\n): Promise<any> => {\n  const uauth = new UAuth(opts)\n\n  let user: UserInfo\n  try {\n    user = await uauth.user()\n  } catch (error) {\n    if (!uauth.fallbackLoginOptions.scope.includes('wallet')) {\n      throw new Error('Must request the \"wallet\" scope for connector to work.')\n    }\n\n    if (opts.shouldLoginWithRedirect) {\n      await uauth.login({\n        packageName: '@uauth/web3modal',\n        packageVersion: VERSION,\n      })\n\n      // NOTE: We don't want to throw because the page will take some time to\n      // load the redirect page.\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      await new Promise<void>(() => {})\n      // We need to throw here otherwise typescript won't know that user isn't null.\n      throw new Error('Should never get here.')\n    } else {\n      await uauth.loginWithPopup({\n        packageName: '@uauth/web3modal',\n        packageVersion: VERSION,\n      })\n      user = await uauth.user()\n    }\n  }\n\n  if (user.wallet_type_hint == null) {\n    throw new Error('no wallet type present')\n  }\n\n  let provider: any\n  if (['web3', 'injected'].includes(user.wallet_type_hint)) {\n    provider = connectors.injected()\n  } else if (user.wallet_type_hint === 'walletconnect') {\n    const id = 'walletconnect'\n\n    provider = connectors.walletconnect(\n      (w3m as any).providerController.getProviderOption(id, 'package'),\n      {\n        network: opts.network,\n        ...(w3m as any).providerController.getProviderOption(id, 'options'),\n      },\n    )\n  } else {\n    throw new Error('Connector not supported')\n  }\n\n  return provider\n}\n"]},"metadata":{},"sourceType":"script"}