{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar znsUtils_1 = require(\"./utils/znsUtils\");\n\nvar resolutionError_1 = require(\"./errors/resolutionError\");\n\nvar TwitterSignatureValidator_1 = require(\"./utils/TwitterSignatureValidator\");\n\nvar publicTypes_1 = require(\"./types/publicTypes\");\n\nvar Networking_1 = __importDefault(require(\"./utils/Networking\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar namehash_1 = require(\"./utils/namehash\");\n\nvar NamingService_1 = require(\"./NamingService\");\n/**\n * @internal\n */\n\n\nvar Udapi =\n/** @class */\nfunction (_super) {\n  __extends(Udapi, _super);\n\n  function Udapi(api) {\n    var _this = _super.call(this) || this;\n\n    _this.name = 'UDAPI';\n    _this.url = (api === null || api === void 0 ? void 0 : api.url) || 'https://unstoppabledomains.com/api/v1';\n    var DefaultUserAgent = 'cross-fetch/3.1.4 (+https://github.com/lquixada/cross-fetch)';\n    var CustomUserAgent = DefaultUserAgent + \" Resolution\";\n    _this.headers = {\n      'X-user-agent': CustomUserAgent\n    };\n    _this.network = (api === null || api === void 0 ? void 0 : api.network) || 1;\n    return _this;\n  }\n\n  Udapi.prototype.isSupportedDomain = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'isSupportedDomain'\n        });\n      });\n    });\n  };\n\n  Udapi.prototype.namehash = function (domain) {\n    var serviceName = utils_1.findNamingServiceName(domain);\n\n    if (serviceName === publicTypes_1.NamingServiceName.ZNS) {\n      return namehash_1.znsNamehash(domain);\n    }\n\n    return namehash_1.eip137Namehash(domain);\n  };\n\n  Udapi.prototype.childhash = function (parentHash, label) {\n    throw new Error('Unsupported method whe using UD Resolution API');\n  };\n\n  Udapi.prototype.record = function (domain, key) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.records(domain, [key])];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent()[key]];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.records = function (domain, keys) {\n    return __awaiter(this, void 0, void 0, function () {\n      var records;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.allRecords(domain)];\n\n          case 1:\n            records = _a.sent();\n            return [2\n            /*return*/\n            , utils_1.constructRecords(keys, records)];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.owner = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var owner;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.resolve(domain)];\n\n          case 1:\n            owner = _a.sent().meta.owner;\n\n            if (!owner) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: domain\n              });\n            }\n\n            if (domain.endsWith('.zil')) {\n              return [2\n              /*return*/\n              , owner.startsWith('zil1') ? owner : znsUtils_1.toBech32Address(owner)];\n            }\n\n            return [2\n            /*return*/\n            , owner];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.twitter = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var serviceName, domainMetaData, owner, records, validationSignature, twitterHandle;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            serviceName = utils_1.findNamingServiceName(domain);\n\n            if (serviceName !== publicTypes_1.NamingServiceName.UNS) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                domain: domain,\n                methodName: 'twitter'\n              });\n            }\n\n            return [4\n            /*yield*/\n            , this.resolve(domain)];\n\n          case 1:\n            domainMetaData = _a.sent();\n\n            if (!domainMetaData.meta.owner) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: domain\n              });\n            }\n\n            owner = domainMetaData.meta.owner;\n            records = domainMetaData.records || {};\n            validationSignature = records['validation.social.twitter.username'];\n            twitterHandle = records['social.twitter.username'];\n\n            if (!validationSignature) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.RecordNotFound, {\n                recordName: 'validation.social.twitter.username',\n                domain: domain\n              });\n            }\n\n            if (!twitterHandle) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.RecordNotFound, {\n                recordName: 'social.twitter.username',\n                domain: domain\n              });\n            }\n\n            if (!TwitterSignatureValidator_1.isValidTwitterSignature({\n              tokenId: domainMetaData.meta.namehash,\n              owner: owner,\n              twitterHandle: twitterHandle,\n              validationSignature: validationSignature\n            })) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.InvalidTwitterVerification, {\n                domain: domain\n              });\n            }\n\n            return [2\n            /*return*/\n            , twitterHandle];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.allRecords = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.resolve(domain)];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent().records || {}];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.getDomainFromTokenId = function (tokenId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var metadata;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            tokenId = namehash_1.fromDecStringToHex(tokenId);\n            return [4\n            /*yield*/\n            , this.getMetadata(tokenId)];\n\n          case 1:\n            metadata = _a.sent();\n            return [2\n            /*return*/\n            , metadata.meta.domain];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.getMetadata = function (tokenId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var tokenUri, resp, metadata;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            tokenUri = this.url + \"/\" + tokenId;\n            return [4\n            /*yield*/\n            , Networking_1.default.fetch(tokenUri, {}).catch(function (err) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.MetadataEndpointError, {\n                tokenUri: tokenUri || 'undefined',\n                errorMessage: err.message\n              });\n            })];\n\n          case 1:\n            resp = _a.sent();\n            return [4\n            /*yield*/\n            , resp.json()];\n\n          case 2:\n            metadata = _a.sent();\n\n            if (!metadata.meta || !metadata.meta.domain) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: \"with tokenId \" + tokenId\n              });\n            }\n\n            if (this.namehash(metadata.meta.domain) !== tokenId) {\n              throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.ServiceProviderError, {\n                methodName: 'unhash',\n                domain: metadata.meta.domain,\n                providerMessage: 'Service provider returned an invalid domain name'\n              });\n            }\n\n            return [2\n            /*return*/\n            , metadata];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.resolve = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var response;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , Networking_1.default.fetch(this.url + \"/\" + domain, {\n              method: 'GET',\n              headers: this.headers\n            })];\n\n          case 1:\n            response = _a.sent();\n            return [2\n            /*return*/\n            , response.json()];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.serviceName = function () {\n    return this.name;\n  };\n\n  Udapi.prototype.resolver = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var record;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.resolve(domain)];\n\n          case 1:\n            record = _a.sent();\n            return [2\n            /*return*/\n            , record.meta.resolver];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.reverse = function (address, currencyTicker) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'reverse'\n        });\n      });\n    });\n  };\n\n  Udapi.prototype.isRegistered = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var record;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.resolve(domain)];\n\n          case 1:\n            record = _a.sent();\n            return [2\n            /*return*/\n            , !utils_1.isNullAddress(record.meta.owner)];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.getTokenUri = function (tokenId) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'getTokenUri'\n        });\n      });\n    });\n  };\n\n  Udapi.prototype.isAvailable = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.isRegistered(domain)];\n\n          case 1:\n            return [2\n            /*return*/\n            , !_a.sent()];\n        }\n      });\n    });\n  };\n\n  Udapi.prototype.registryAddress = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          domain: domain,\n          methodName: 'registryAddress'\n        });\n      });\n    });\n  };\n\n  Udapi.prototype.locations = function (domains) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n          methodName: 'locations'\n        });\n      });\n    });\n  };\n\n  return Udapi;\n}(NamingService_1.NamingService);\n\nexports.default = Udapi;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__importDefault","mod","__esModule","defineProperty","exports","znsUtils_1","require","resolutionError_1","TwitterSignatureValidator_1","publicTypes_1","Networking_1","utils_1","namehash_1","NamingService_1","Udapi","_super","api","_this","name","url","DefaultUserAgent","CustomUserAgent","headers","network","isSupportedDomain","domain","_a","ResolutionError","ResolutionErrorCode","UnsupportedMethod","methodName","namehash","serviceName","findNamingServiceName","NamingServiceName","ZNS","znsNamehash","eip137Namehash","childhash","parentHash","Error","record","key","records","keys","allRecords","constructRecords","owner","meta","UnregisteredDomain","endsWith","startsWith","toBech32Address","twitter","domainMetaData","validationSignature","twitterHandle","UNS","RecordNotFound","recordName","isValidTwitterSignature","tokenId","InvalidTwitterVerification","getDomainFromTokenId","metadata","fromDecStringToHex","getMetadata","tokenUri","resp","default","fetch","catch","err","MetadataEndpointError","errorMessage","message","json","ServiceProviderError","providerMessage","response","method","resolver","reverse","address","currencyTicker","isRegistered","isNullAddress","getTokenUri","isAvailable","registryAddress","locations","domains","NamingService"],"sources":["/Users/mac/Desktop/work/wave-frontend/node_modules/@unstoppabledomains/resolution/build/UdApi.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar znsUtils_1 = require(\"./utils/znsUtils\");\nvar resolutionError_1 = require(\"./errors/resolutionError\");\nvar TwitterSignatureValidator_1 = require(\"./utils/TwitterSignatureValidator\");\nvar publicTypes_1 = require(\"./types/publicTypes\");\nvar Networking_1 = __importDefault(require(\"./utils/Networking\"));\nvar utils_1 = require(\"./utils\");\nvar namehash_1 = require(\"./utils/namehash\");\nvar NamingService_1 = require(\"./NamingService\");\n/**\n * @internal\n */\nvar Udapi = /** @class */ (function (_super) {\n    __extends(Udapi, _super);\n    function Udapi(api) {\n        var _this = _super.call(this) || this;\n        _this.name = 'UDAPI';\n        _this.url = (api === null || api === void 0 ? void 0 : api.url) || 'https://unstoppabledomains.com/api/v1';\n        var DefaultUserAgent = 'cross-fetch/3.1.4 (+https://github.com/lquixada/cross-fetch)';\n        var CustomUserAgent = DefaultUserAgent + \" Resolution\";\n        _this.headers = { 'X-user-agent': CustomUserAgent };\n        _this.network = (api === null || api === void 0 ? void 0 : api.network) || 1;\n        return _this;\n    }\n    Udapi.prototype.isSupportedDomain = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'isSupportedDomain',\n                });\n            });\n        });\n    };\n    Udapi.prototype.namehash = function (domain) {\n        var serviceName = utils_1.findNamingServiceName(domain);\n        if (serviceName === publicTypes_1.NamingServiceName.ZNS) {\n            return namehash_1.znsNamehash(domain);\n        }\n        return namehash_1.eip137Namehash(domain);\n    };\n    Udapi.prototype.childhash = function (parentHash, label) {\n        throw new Error('Unsupported method whe using UD Resolution API');\n    };\n    Udapi.prototype.record = function (domain, key) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.records(domain, [key])];\n                    case 1: return [2 /*return*/, (_a.sent())[key]];\n                }\n            });\n        });\n    };\n    Udapi.prototype.records = function (domain, keys) {\n        return __awaiter(this, void 0, void 0, function () {\n            var records;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.allRecords(domain)];\n                    case 1:\n                        records = _a.sent();\n                        return [2 /*return*/, utils_1.constructRecords(keys, records)];\n                }\n            });\n        });\n    };\n    Udapi.prototype.owner = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var owner;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.resolve(domain)];\n                    case 1:\n                        owner = (_a.sent()).meta.owner;\n                        if (!owner) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: domain,\n                            });\n                        }\n                        if (domain.endsWith('.zil')) {\n                            return [2 /*return*/, owner.startsWith('zil1') ? owner : znsUtils_1.toBech32Address(owner)];\n                        }\n                        return [2 /*return*/, owner];\n                }\n            });\n        });\n    };\n    Udapi.prototype.twitter = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var serviceName, domainMetaData, owner, records, validationSignature, twitterHandle;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        serviceName = utils_1.findNamingServiceName(domain);\n                        if (serviceName !== publicTypes_1.NamingServiceName.UNS) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                                domain: domain,\n                                methodName: 'twitter',\n                            });\n                        }\n                        return [4 /*yield*/, this.resolve(domain)];\n                    case 1:\n                        domainMetaData = _a.sent();\n                        if (!domainMetaData.meta.owner) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: domain,\n                            });\n                        }\n                        owner = domainMetaData.meta.owner;\n                        records = domainMetaData.records || {};\n                        validationSignature = records['validation.social.twitter.username'];\n                        twitterHandle = records['social.twitter.username'];\n                        if (!validationSignature) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.RecordNotFound, {\n                                recordName: 'validation.social.twitter.username',\n                                domain: domain,\n                            });\n                        }\n                        if (!twitterHandle) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.RecordNotFound, {\n                                recordName: 'social.twitter.username',\n                                domain: domain,\n                            });\n                        }\n                        if (!TwitterSignatureValidator_1.isValidTwitterSignature({\n                            tokenId: domainMetaData.meta.namehash,\n                            owner: owner,\n                            twitterHandle: twitterHandle,\n                            validationSignature: validationSignature,\n                        })) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.InvalidTwitterVerification, {\n                                domain: domain,\n                            });\n                        }\n                        return [2 /*return*/, twitterHandle];\n                }\n            });\n        });\n    };\n    Udapi.prototype.allRecords = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.resolve(domain)];\n                    case 1: return [2 /*return*/, (_a.sent()).records || {}];\n                }\n            });\n        });\n    };\n    Udapi.prototype.getDomainFromTokenId = function (tokenId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var metadata;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        tokenId = namehash_1.fromDecStringToHex(tokenId);\n                        return [4 /*yield*/, this.getMetadata(tokenId)];\n                    case 1:\n                        metadata = _a.sent();\n                        return [2 /*return*/, metadata.meta.domain];\n                }\n            });\n        });\n    };\n    Udapi.prototype.getMetadata = function (tokenId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenUri, resp, metadata;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        tokenUri = this.url + \"/\" + tokenId;\n                        return [4 /*yield*/, Networking_1.default.fetch(tokenUri, {}).catch(function (err) {\n                                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.MetadataEndpointError, {\n                                    tokenUri: tokenUri || 'undefined',\n                                    errorMessage: err.message,\n                                });\n                            })];\n                    case 1:\n                        resp = _a.sent();\n                        return [4 /*yield*/, resp.json()];\n                    case 2:\n                        metadata = _a.sent();\n                        if (!metadata.meta || !metadata.meta.domain) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: \"with tokenId \" + tokenId,\n                            });\n                        }\n                        if (this.namehash(metadata.meta.domain) !== tokenId) {\n                            throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.ServiceProviderError, {\n                                methodName: 'unhash',\n                                domain: metadata.meta.domain,\n                                providerMessage: 'Service provider returned an invalid domain name',\n                            });\n                        }\n                        return [2 /*return*/, metadata];\n                }\n            });\n        });\n    };\n    Udapi.prototype.resolve = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Networking_1.default.fetch(this.url + \"/\" + domain, {\n                            method: 'GET',\n                            headers: this.headers,\n                        })];\n                    case 1:\n                        response = _a.sent();\n                        return [2 /*return*/, response.json()];\n                }\n            });\n        });\n    };\n    Udapi.prototype.serviceName = function () {\n        return this.name;\n    };\n    Udapi.prototype.resolver = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var record;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.resolve(domain)];\n                    case 1:\n                        record = _a.sent();\n                        return [2 /*return*/, record.meta.resolver];\n                }\n            });\n        });\n    };\n    Udapi.prototype.reverse = function (address, currencyTicker) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'reverse',\n                });\n            });\n        });\n    };\n    Udapi.prototype.isRegistered = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var record;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.resolve(domain)];\n                    case 1:\n                        record = _a.sent();\n                        return [2 /*return*/, !utils_1.isNullAddress(record.meta.owner)];\n                }\n            });\n        });\n    };\n    Udapi.prototype.getTokenUri = function (tokenId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'getTokenUri',\n                });\n            });\n        });\n    };\n    Udapi.prototype.isAvailable = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.isRegistered(domain)];\n                    case 1: return [2 /*return*/, !(_a.sent())];\n                }\n            });\n        });\n    };\n    Udapi.prototype.registryAddress = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    domain: domain,\n                    methodName: 'registryAddress',\n                });\n            });\n        });\n    };\n    Udapi.prototype.locations = function (domains) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                throw new resolutionError_1.ResolutionError(resolutionError_1.ResolutionErrorCode.UnsupportedMethod, {\n                    methodName: 'locations',\n                });\n            });\n        });\n    };\n    return Udapi;\n}(NamingService_1.NamingService));\nexports.default = Udapi;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}