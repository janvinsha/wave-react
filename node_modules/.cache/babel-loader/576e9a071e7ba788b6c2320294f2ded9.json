{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar index_1 = require(\"./index\");\n\nvar js_sha3_1 = require(\"js-sha3\");\n\nvar recoverSignature_1 = require(\"./recoverSignature\");\n\nvar namehash_1 = require(\"./namehash\");\n\nvar TwitterVerificationAddress = '0x12cfb13522F13a78b650a8bCbFCf50b7CB899d82';\n\nexports.isValidTwitterSignature = function (_a) {\n  var tokenId = _a.tokenId,\n      owner = _a.owner,\n      twitterHandle = _a.twitterHandle,\n      validationSignature = _a.validationSignature;\n  var tokenIdInDecimals = namehash_1.fromHexStringToDecimals(tokenId);\n  var message = [tokenIdInDecimals, owner, 'social.twitter.username', twitterHandle].map(function (value) {\n    return '0x' + js_sha3_1.keccak256(value.startsWith('0x') ? index_1.hexToBytes(value) : value);\n  }).reduce(function (message, hashedValue) {\n    return message + hashedValue;\n  }, '');\n  var signerAddress = recoverSignature_1.recover(message, validationSignature);\n  return signerAddress === TwitterVerificationAddress;\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","index_1","require","js_sha3_1","recoverSignature_1","namehash_1","TwitterVerificationAddress","isValidTwitterSignature","_a","tokenId","owner","twitterHandle","validationSignature","tokenIdInDecimals","fromHexStringToDecimals","message","map","keccak256","startsWith","hexToBytes","reduce","hashedValue","signerAddress","recover"],"sources":["/Users/mac/Desktop/work/wave-frontend/node_modules/@unstoppabledomains/resolution/build/utils/TwitterSignatureValidator.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"./index\");\nvar js_sha3_1 = require(\"js-sha3\");\nvar recoverSignature_1 = require(\"./recoverSignature\");\nvar namehash_1 = require(\"./namehash\");\nvar TwitterVerificationAddress = '0x12cfb13522F13a78b650a8bCbFCf50b7CB899d82';\nexports.isValidTwitterSignature = function (_a) {\n    var tokenId = _a.tokenId, owner = _a.owner, twitterHandle = _a.twitterHandle, validationSignature = _a.validationSignature;\n    var tokenIdInDecimals = namehash_1.fromHexStringToDecimals(tokenId);\n    var message = [\n        tokenIdInDecimals,\n        owner,\n        'social.twitter.username',\n        twitterHandle,\n    ]\n        .map(function (value) {\n        return '0x' + js_sha3_1.keccak256(value.startsWith('0x') ? index_1.hexToBytes(value) : value);\n    })\n        .reduce(function (message, hashedValue) { return message + hashedValue; }, '');\n    var signerAddress = recoverSignature_1.recover(message, validationSignature);\n    return signerAddress === TwitterVerificationAddress;\n};\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAIE,kBAAkB,GAAGF,OAAO,CAAC,oBAAD,CAAhC;;AACA,IAAIG,UAAU,GAAGH,OAAO,CAAC,YAAD,CAAxB;;AACA,IAAII,0BAA0B,GAAG,4CAAjC;;AACAP,OAAO,CAACQ,uBAAR,GAAkC,UAAUC,EAAV,EAAc;EAC5C,IAAIC,OAAO,GAAGD,EAAE,CAACC,OAAjB;EAAA,IAA0BC,KAAK,GAAGF,EAAE,CAACE,KAArC;EAAA,IAA4CC,aAAa,GAAGH,EAAE,CAACG,aAA/D;EAAA,IAA8EC,mBAAmB,GAAGJ,EAAE,CAACI,mBAAvG;EACA,IAAIC,iBAAiB,GAAGR,UAAU,CAACS,uBAAX,CAAmCL,OAAnC,CAAxB;EACA,IAAIM,OAAO,GAAG,CACVF,iBADU,EAEVH,KAFU,EAGV,yBAHU,EAIVC,aAJU,EAMTK,GANS,CAML,UAAUhB,KAAV,EAAiB;IACtB,OAAO,OAAOG,SAAS,CAACc,SAAV,CAAoBjB,KAAK,CAACkB,UAAN,CAAiB,IAAjB,IAAyBjB,OAAO,CAACkB,UAAR,CAAmBnB,KAAnB,CAAzB,GAAqDA,KAAzE,CAAd;EACH,CARa,EASToB,MATS,CASF,UAAUL,OAAV,EAAmBM,WAAnB,EAAgC;IAAE,OAAON,OAAO,GAAGM,WAAjB;EAA+B,CAT/D,EASiE,EATjE,CAAd;EAUA,IAAIC,aAAa,GAAGlB,kBAAkB,CAACmB,OAAnB,CAA2BR,OAA3B,EAAoCH,mBAApC,CAApB;EACA,OAAOU,aAAa,KAAKhB,0BAAzB;AACH,CAfD"},"metadata":{},"sourceType":"script"}