{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar types_1 = require(\"./types\");\n\nvar configurationError_1 = __importDefault(require(\"./errors/configurationError\"));\n\nvar configurationError_2 = require(\"./errors/configurationError\");\n\nvar utils_1 = require(\"./utils\");\n\nvar FetchProvider_1 = __importDefault(require(\"./FetchProvider\"));\n\nvar EthereumContract_1 = __importDefault(require(\"./contracts/EthereumContract\"));\n\nvar proxyReader_1 = __importDefault(require(\"./contracts/uns/proxyReader\"));\n\nvar uns_config_json_1 = __importDefault(require(\"./config/uns-config.json\"));\n\nvar resolutionError_1 = __importStar(require(\"./errors/resolutionError\"));\n\nvar namehash_1 = require(\"./utils/namehash\");\n\nvar UnsInternal =\n/** @class */\nfunction () {\n  function UnsInternal(unsLocation, source, blockchain) {\n    this.unsLocation = unsLocation;\n    this.checkNetworkConfig(unsLocation, source);\n    this.network = source.network;\n    this.blockchain = blockchain;\n    this.url = source['url'] || UnsInternal.UrlMap[this.network];\n    this.provider = source['provider'] || new FetchProvider_1.default(this.unsLocation, this.url);\n    this.readerContract = new EthereumContract_1.default(proxyReader_1.default, source.proxyReaderAddress || UnsInternal.ProxyReaderMap[utils_1.EthereumNetworks[this.network]], this.provider);\n  }\n\n  UnsInternal.prototype.exists = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      var exists;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.readerContract.call('exists', [this.namehash(domain)])];\n\n          case 1:\n            exists = _a.sent()[0];\n            return [2\n            /*return*/\n            , exists];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.getTokenUri = function (tokenId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var tokenURI;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.readerContract.call('tokenURI', [tokenId])];\n\n          case 1:\n            tokenURI = _a.sent()[0];\n            return [2\n            /*return*/\n            , tokenURI];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.registryAddress = function (domainOrNamehash) {\n    return __awaiter(this, void 0, void 0, function () {\n      var namehash, address;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!this.checkDomain(domainOrNamehash, domainOrNamehash.startsWith('0x'))) {\n              throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n                domain: domainOrNamehash\n              });\n            }\n\n            namehash = domainOrNamehash.startsWith('0x') ? domainOrNamehash : this.namehash(domainOrNamehash);\n            return [4\n            /*yield*/\n            , this.readerContract.call('registryOf', [namehash])];\n\n          case 1:\n            address = _a.sent()[0];\n\n            if (utils_1.isNullAddress(address)) {\n              throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                domain: domainOrNamehash\n              });\n            }\n\n            return [2\n            /*return*/\n            , address];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.resolver = function (domain) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getVerifiedData(domain)];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent().resolver];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.get = function (tokenId, keys) {\n    if (keys === void 0) {\n      keys = [];\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, resolver, owner, values;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.readerContract.call('getData', [keys, tokenId])];\n\n          case 1:\n            _a = _b.sent(), resolver = _a[0], owner = _a[1], values = _a[2];\n            return [2\n            /*return*/\n            , {\n              owner: owner,\n              resolver: resolver,\n              records: utils_1.constructRecords(keys, values),\n              location: this.unsLocation\n            }];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.locations = function (domains) {\n    return __awaiter(this, void 0, void 0, function () {\n      var tokenIds, _a, _b, resolvers, owners, registries, locations;\n\n      var _this = this;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            tokenIds = domains.map(function (d) {\n              return _this.namehash(d);\n            });\n            return [4\n            /*yield*/\n            , this.readerContract.multicall(__spreadArrays([{\n              method: 'getDataForMany',\n              args: [[], tokenIds]\n            }], tokenIds.map(function (id) {\n              return {\n                method: 'registryOf',\n                args: [id]\n              };\n            })))];\n\n          case 1:\n            _a = _c.sent(), _b = _a[0], resolvers = _b[0], owners = _b[1], registries = _a.slice(1);\n            locations = domains.reduce(function (locations, domain, i) {\n              locations[domain] = null;\n\n              if (owners && owners[i] !== types_1.NullAddress) {\n                locations[domain] = {\n                  resolverAddress: resolvers[i],\n                  registryAddress: registries[i][0],\n                  ownerAddress: owners[i],\n                  networkId: utils_1.EthereumNetworks[_this.network],\n                  blockchain: _this.blockchain,\n                  blockchainProviderUrl: _this.url\n                };\n              }\n\n              return locations;\n            }, {});\n            return [2\n            /*return*/\n            , locations];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.namehash = function (domain) {\n    if (!this.checkDomain(domain)) {\n      throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n        domain: domain\n      });\n    }\n\n    return namehash_1.eip137Namehash(domain);\n  };\n\n  UnsInternal.prototype.checkDomain = function (domain, passIfTokenID) {\n    if (passIfTokenID === void 0) {\n      passIfTokenID = false;\n    }\n\n    if (passIfTokenID) {\n      return true;\n    }\n\n    var tokens = domain.split('.');\n    return !!tokens.length && tokens[tokens.length - 1] !== 'zil' && !(domain === 'eth' || /^[^-]*[^-]*\\.(eth|luxe|xyz|kred|addr\\.reverse)$/.test(domain)) && tokens.every(function (v) {\n      return !!v.length;\n    });\n  };\n\n  UnsInternal.prototype.getVerifiedData = function (domain, keys) {\n    return __awaiter(this, void 0, void 0, function () {\n      var tokenId, data;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            tokenId = this.namehash(domain);\n            return [4\n            /*yield*/\n            , this.get(tokenId, keys)];\n\n          case 1:\n            data = _a.sent();\n\n            if (utils_1.isNullAddress(data.resolver)) {\n              if (utils_1.isNullAddress(data.owner)) {\n                throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                  domain: domain\n                });\n              }\n\n              throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnspecifiedResolver, {\n                location: this.unsLocation,\n                domain: domain\n              });\n            }\n\n            return [2\n            /*return*/\n            , data];\n        }\n      });\n    });\n  };\n\n  UnsInternal.prototype.checkNetworkConfig = function (location, source) {\n    if (!source.network) {\n      throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.UnsupportedNetwork, {\n        method: location\n      });\n    }\n\n    if (source.proxyReaderAddress && !this.isValidProxyReader(source.proxyReaderAddress)) {\n      throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.InvalidConfigurationField, {\n        method: this.unsLocation,\n        field: 'proxyReaderAddress'\n      });\n    }\n\n    if (!types_1.UnsSupportedNetwork.guard(source.network)) {\n      this.checkCustomNetworkConfig(source);\n    }\n  };\n\n  UnsInternal.prototype.checkCustomNetworkConfig = function (source) {\n    if (!this.isValidProxyReader(source.proxyReaderAddress)) {\n      throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.InvalidConfigurationField, {\n        method: this.unsLocation,\n        field: 'proxyReaderAddress'\n      });\n    }\n\n    if (!source['url'] && !source['provider']) {\n      throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n        method: this.unsLocation,\n        config: 'url or provider'\n      });\n    }\n  };\n\n  UnsInternal.prototype.isValidProxyReader = function (address) {\n    if (!address) {\n      throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n        method: this.unsLocation,\n        config: 'proxyReaderAddress'\n      });\n    }\n\n    var ethLikePattern = new RegExp('^0x[a-fA-F0-9]{40}$');\n    return ethLikePattern.test(address);\n  };\n\n  UnsInternal.ProxyReaderMap = getProxyReaderMap();\n  UnsInternal.UrlMap = {\n    mainnet: 'https://mainnet.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n    rinkeby: 'https://rinkeby.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n    goerli: 'https://goerli.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n    'polygon-mainnet': 'https://polygon-mainnet.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n    'polygon-mumbai': 'https://polygon-mumbai.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39'\n  };\n  return UnsInternal;\n}();\n\nexports.default = UnsInternal;\n\nfunction getProxyReaderMap() {\n  var map = {};\n\n  for (var _i = 0, _a = Object.keys(uns_config_json_1.default.networks); _i < _a.length; _i++) {\n    var id = _a[_i];\n    map[id] = uns_config_json_1.default.networks[id].contracts.ProxyReader.address.toLowerCase();\n  }\n\n  return map;\n}","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__spreadArrays","s","i","il","arguments","r","Array","k","a","j","jl","__importDefault","mod","__esModule","__importStar","Object","hasOwnProperty","defineProperty","exports","types_1","require","configurationError_1","configurationError_2","utils_1","FetchProvider_1","EthereumContract_1","proxyReader_1","uns_config_json_1","resolutionError_1","namehash_1","UnsInternal","unsLocation","source","blockchain","checkNetworkConfig","network","url","UrlMap","provider","default","readerContract","proxyReaderAddress","ProxyReaderMap","EthereumNetworks","prototype","exists","domain","_a","namehash","getTokenUri","tokenId","tokenURI","registryAddress","domainOrNamehash","address","checkDomain","startsWith","ResolutionErrorCode","UnsupportedDomain","isNullAddress","UnregisteredDomain","resolver","getVerifiedData","get","keys","owner","values","_b","records","constructRecords","location","locations","domains","tokenIds","resolvers","owners","registries","_this","_c","map","d","multicall","method","args","id","slice","reduce","NullAddress","resolverAddress","ownerAddress","networkId","blockchainProviderUrl","eip137Namehash","passIfTokenID","tokens","split","test","every","data","UnspecifiedResolver","ConfigurationErrorCode","UnsupportedNetwork","isValidProxyReader","InvalidConfigurationField","field","UnsSupportedNetwork","guard","checkCustomNetworkConfig","CustomNetworkConfigMissing","config","ethLikePattern","RegExp","getProxyReaderMap","mainnet","rinkeby","goerli","_i","networks","contracts","ProxyReader","toLowerCase"],"sources":["/Users/mac/Desktop/work/wave-frontend/node_modules/@unstoppabledomains/resolution/build/UnsInternal.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"./types\");\nvar configurationError_1 = __importDefault(require(\"./errors/configurationError\"));\nvar configurationError_2 = require(\"./errors/configurationError\");\nvar utils_1 = require(\"./utils\");\nvar FetchProvider_1 = __importDefault(require(\"./FetchProvider\"));\nvar EthereumContract_1 = __importDefault(require(\"./contracts/EthereumContract\"));\nvar proxyReader_1 = __importDefault(require(\"./contracts/uns/proxyReader\"));\nvar uns_config_json_1 = __importDefault(require(\"./config/uns-config.json\"));\nvar resolutionError_1 = __importStar(require(\"./errors/resolutionError\"));\nvar namehash_1 = require(\"./utils/namehash\");\nvar UnsInternal = /** @class */ (function () {\n    function UnsInternal(unsLocation, source, blockchain) {\n        this.unsLocation = unsLocation;\n        this.checkNetworkConfig(unsLocation, source);\n        this.network = source.network;\n        this.blockchain = blockchain;\n        this.url = source['url'] || UnsInternal.UrlMap[this.network];\n        this.provider =\n            source['provider'] || new FetchProvider_1.default(this.unsLocation, this.url);\n        this.readerContract = new EthereumContract_1.default(proxyReader_1.default, source.proxyReaderAddress ||\n            UnsInternal.ProxyReaderMap[utils_1.EthereumNetworks[this.network]], this.provider);\n    }\n    UnsInternal.prototype.exists = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            var exists;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.readerContract.call('exists', [\n                            this.namehash(domain),\n                        ])];\n                    case 1:\n                        exists = (_a.sent())[0];\n                        return [2 /*return*/, exists];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.getTokenUri = function (tokenId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenURI;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.readerContract.call('tokenURI', [tokenId])];\n                    case 1:\n                        tokenURI = (_a.sent())[0];\n                        return [2 /*return*/, tokenURI];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.registryAddress = function (domainOrNamehash) {\n        return __awaiter(this, void 0, void 0, function () {\n            var namehash, address;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.checkDomain(domainOrNamehash, domainOrNamehash.startsWith('0x'))) {\n                            throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n                                domain: domainOrNamehash,\n                            });\n                        }\n                        namehash = domainOrNamehash.startsWith('0x')\n                            ? domainOrNamehash\n                            : this.namehash(domainOrNamehash);\n                        return [4 /*yield*/, this.readerContract.call('registryOf', [namehash])];\n                    case 1:\n                        address = (_a.sent())[0];\n                        if (utils_1.isNullAddress(address)) {\n                            throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                domain: domainOrNamehash,\n                            });\n                        }\n                        return [2 /*return*/, address];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.resolver = function (domain) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getVerifiedData(domain)];\n                    case 1: return [2 /*return*/, (_a.sent()).resolver];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.get = function (tokenId, keys) {\n        if (keys === void 0) { keys = []; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, resolver, owner, values;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.readerContract.call('getData', [keys, tokenId])];\n                    case 1:\n                        _a = _b.sent(), resolver = _a[0], owner = _a[1], values = _a[2];\n                        return [2 /*return*/, {\n                                owner: owner,\n                                resolver: resolver,\n                                records: utils_1.constructRecords(keys, values),\n                                location: this.unsLocation,\n                            }];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.locations = function (domains) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenIds, _a, _b, resolvers, owners, registries, locations;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        tokenIds = domains.map(function (d) { return _this.namehash(d); });\n                        return [4 /*yield*/, this.readerContract.multicall(__spreadArrays([\n                                {\n                                    method: 'getDataForMany',\n                                    args: [[], tokenIds],\n                                }\n                            ], tokenIds.map(function (id) { return ({\n                                method: 'registryOf',\n                                args: [id],\n                            }); })))];\n                    case 1:\n                        _a = _c.sent(), _b = _a[0], resolvers = _b[0], owners = _b[1], registries = _a.slice(1);\n                        locations = domains.reduce(function (locations, domain, i) {\n                            locations[domain] = null;\n                            if (owners && owners[i] !== types_1.NullAddress) {\n                                locations[domain] = {\n                                    resolverAddress: resolvers[i],\n                                    registryAddress: registries[i][0],\n                                    ownerAddress: owners[i],\n                                    networkId: utils_1.EthereumNetworks[_this.network],\n                                    blockchain: _this.blockchain,\n                                    blockchainProviderUrl: _this.url,\n                                };\n                            }\n                            return locations;\n                        }, {});\n                        return [2 /*return*/, locations];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.namehash = function (domain) {\n        if (!this.checkDomain(domain)) {\n            throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnsupportedDomain, {\n                domain: domain,\n            });\n        }\n        return namehash_1.eip137Namehash(domain);\n    };\n    UnsInternal.prototype.checkDomain = function (domain, passIfTokenID) {\n        if (passIfTokenID === void 0) { passIfTokenID = false; }\n        if (passIfTokenID) {\n            return true;\n        }\n        var tokens = domain.split('.');\n        return (!!tokens.length &&\n            tokens[tokens.length - 1] !== 'zil' &&\n            !(domain === 'eth' ||\n                /^[^-]*[^-]*\\.(eth|luxe|xyz|kred|addr\\.reverse)$/.test(domain)) &&\n            tokens.every(function (v) { return !!v.length; }));\n    };\n    UnsInternal.prototype.getVerifiedData = function (domain, keys) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenId, data;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        tokenId = this.namehash(domain);\n                        return [4 /*yield*/, this.get(tokenId, keys)];\n                    case 1:\n                        data = _a.sent();\n                        if (utils_1.isNullAddress(data.resolver)) {\n                            if (utils_1.isNullAddress(data.owner)) {\n                                throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnregisteredDomain, {\n                                    domain: domain,\n                                });\n                            }\n                            throw new resolutionError_1.default(resolutionError_1.ResolutionErrorCode.UnspecifiedResolver, {\n                                location: this.unsLocation,\n                                domain: domain,\n                            });\n                        }\n                        return [2 /*return*/, data];\n                }\n            });\n        });\n    };\n    UnsInternal.prototype.checkNetworkConfig = function (location, source) {\n        if (!source.network) {\n            throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.UnsupportedNetwork, {\n                method: location,\n            });\n        }\n        if (source.proxyReaderAddress &&\n            !this.isValidProxyReader(source.proxyReaderAddress)) {\n            throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.InvalidConfigurationField, {\n                method: this.unsLocation,\n                field: 'proxyReaderAddress',\n            });\n        }\n        if (!types_1.UnsSupportedNetwork.guard(source.network)) {\n            this.checkCustomNetworkConfig(source);\n        }\n    };\n    UnsInternal.prototype.checkCustomNetworkConfig = function (source) {\n        if (!this.isValidProxyReader(source.proxyReaderAddress)) {\n            throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.InvalidConfigurationField, {\n                method: this.unsLocation,\n                field: 'proxyReaderAddress',\n            });\n        }\n        if (!source['url'] && !source['provider']) {\n            throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n                method: this.unsLocation,\n                config: 'url or provider',\n            });\n        }\n    };\n    UnsInternal.prototype.isValidProxyReader = function (address) {\n        if (!address) {\n            throw new configurationError_1.default(configurationError_2.ConfigurationErrorCode.CustomNetworkConfigMissing, {\n                method: this.unsLocation,\n                config: 'proxyReaderAddress',\n            });\n        }\n        var ethLikePattern = new RegExp('^0x[a-fA-F0-9]{40}$');\n        return ethLikePattern.test(address);\n    };\n    UnsInternal.ProxyReaderMap = getProxyReaderMap();\n    UnsInternal.UrlMap = {\n        mainnet: 'https://mainnet.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n        rinkeby: 'https://rinkeby.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n        goerli: 'https://goerli.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n        'polygon-mainnet': 'https://polygon-mainnet.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n        'polygon-mumbai': 'https://polygon-mumbai.infura.io/v3/c4bb906ed6904c42b19c95825fe55f39',\n    };\n    return UnsInternal;\n}());\nexports.default = UnsInternal;\nfunction getProxyReaderMap() {\n    var map = {};\n    for (var _i = 0, _a = Object.keys(uns_config_json_1.default.networks); _i < _a.length; _i++) {\n        var id = _a[_i];\n        map[id] =\n            uns_config_json_1.default.networks[id].contracts.ProxyReader.address.toLowerCase();\n    }\n    return map;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}